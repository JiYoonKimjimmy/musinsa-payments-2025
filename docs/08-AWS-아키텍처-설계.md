# 08. AWS μ•„ν‚¤ν…μ² μ„¤κ³„

## 1. κ°μ”

λ¬΄λ£ ν¬μΈνΈ μ‹μ¤ν…μ„ AWS κΈ°λ°μΌλ΅ μ„λΉ„μ¤ν•λ‹¤κ³  κ°€μ •ν–μ„ λ•μ μ•„ν‚¤ν…μ²μ…λ‹λ‹¤. ν™•μ¥μ„±, κ°€μ©μ„±, λ³΄μ•μ„ κ³ λ ¤ν• κµ¬μ„±μ…λ‹λ‹¤.

## 2. μ£Όμ” AWS μ„λΉ„μ¤

| μμ—­       | μ„λΉ„μ¤                       | μ©λ„                    |
|----------|---------------------------|-----------------------|
| μ»΄ν“¨ν…      | ECS (Fargate)             | Spring Boot μ• ν”λ¦¬μΌ€μ΄μ… μ‹¤ν–‰ |
| λ°μ΄ν„°λ² μ΄μ¤   | RDS (Aurora PostgreSQL)   | ν¬μΈνΈ λ°μ΄ν„° μ €μ¥            |
| μΊμ‹±       | ElastiCache (Redis)       | μ„¤μ • μΊμ‹±, μ„Έμ… μΊμ‹±          |
| λ΅λ“ λ°Έλ°μ‹±   | Application Load Balancer | HTTP/HTTPS λ΅λ“ λ°Έλ°μ‹±     |
| DNS      | Route 53                  | λ„λ©”μΈ κ΄€λ¦¬, ν—¬μ¤μ²΄ν¬ κΈ°λ° νμΌμ¤λ²„  |
| λ¨λ‹ν„°λ§     | CloudWatch                | λ©”νΈλ¦­, λ΅κ·Έ, μ•λ           |
| λ³΄μ•       | VPC, Security Group, IAM  | λ„¤νΈμ›ν¬ κ²©λ¦¬, μ ‘κ·Ό μ μ–΄        |
| μ»¨ν…μ΄λ„ μ €μ¥μ† | ECR                       | Docker μ΄λ―Έμ§€ μ €μ¥         |

---

## 3. μ•„ν‚¤ν…μ² λ‹¤μ΄μ–΄κ·Έλ¨

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚                           Internet                                  β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                               β†“
                        [ Route 53 ]
                               β†“
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚                        VPC (Multi-AZ)                               β”‚
β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”  β”‚
β”‚  β”‚                     Public Subnet                             β”‚  β”‚
β”‚  β”‚              [ Application Load Balancer ]                    β”‚  β”‚
β”‚  β”‚                    (SSL Termination)                          β”‚  β”‚
β”‚  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”  β”‚
β”‚                               β†“                                     β”‚
β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”   β”‚
β”‚  β”‚                    Private Subnet                            β”‚   β”‚
β”‚  β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”  β”‚   β”‚
β”‚  β”‚  β”‚ ECS Fargate β”‚  β”‚ ECS Fargate β”‚  β”‚   ElastiCache       β”‚  β”‚   β”‚
β”‚  β”‚  β”‚   (AZ-1)    β”‚  β”‚   (AZ-2)    β”‚  β”‚     (Redis)         β”‚  β”‚   β”‚
β”‚  β”‚  β””β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”  β””β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”  β”‚   β”‚
β”‚  β”‚         β””β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”                                   β”‚   β”‚
β”‚  β”‚                  β†“                                           β”‚   β”‚
β”‚  β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”β”‚   β”‚
β”‚  β”‚  β”‚            RDS Aurora (Multi-AZ)                        β”‚β”‚   β”‚
β”‚  β”‚  β”‚     [ Primary (AZ-1) ] β†β†’ [ Replica (AZ-2) ]            β”‚β”‚   β”‚
β”‚  β”‚  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”β”‚   β”‚
β”‚  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”   β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

---

## 4. μ»΄ν¬λ„νΈ μ„¤κ³„

### 4.1 μ»΄ν“¨ν… (ECS Fargate)

| ν•­λ©           | μ„¤μ •                           |
|--------------|------------------------------|
| Task μ‚¬μ–‘      | 0.5~2 vCPU, 1~4GB Memory     |
| Task μ       | μµμ† 2κ°, μµλ€ 10κ° (Auto Scaling) |
| λ°°ν¬ λ°©μ‹        | Multi-AZ                     |
| Health Check | `/actuator/health`           |
| Base Image   | OpenJDK 21 (Amazon Linux 2)  |

### 4.2 λ°μ΄ν„°λ² μ΄μ¤ (Aurora PostgreSQL)

| ν•­λ©      | μ„¤μ •                           |
|---------|------------------------------|
| μΈμ¤ν„΄μ¤ νƒ€μ… | db.t3.medium (Primary)       |
| λ°°ν¬ λ°©μ‹   | Multi-AZ (Primary + Replica) |
| μλ™ λ°±μ—…   | 7μΌ λ³΄κ΄€                        |
| μ•”νΈν™”     | μ €μ¥ λ°μ΄ν„° μ•”νΈν™” ν™μ„±ν™”               |
| μ»¤λ„¥μ… ν’€   | HikariCP (max: 20, min: 5)   |

### 4.3 μΊμ‹± (ElastiCache Redis)

| ν•­λ©       | μ„¤μ •               |
|----------|------------------|
| μ—”μ§„       | Redis 7.x        |
| λ…Έλ“ νƒ€μ…    | cache.t3.small   |
| Multi-AZ | μ΄μ ν™κ²½ ν™μ„±ν™”        |
| μ©λ„       | μ„¤μ • μΊμ‹±, λ¶„μ‚° λ½ (μµμ…) |

---

## 5. ν™•μ¥μ„± λ° κ°€μ©μ„±

### 5.1 Auto Scaling μ •μ±…

| νΈλ¦¬κ±° μ΅°κ±΄            | μ•΅μ…             |
|-------------------|----------------|
| CPU > 70% (5λ¶„ μ§€μ†) | Task +2 μ¤μΌ€μΌ μ•„μ›ƒ |
| CPU < 30% (5λ¶„ μ§€μ†) | Task -1 μ¤μΌ€μΌ μΈ  |
| Memory > 80%      | Task +2 μ¤μΌ€μΌ μ•„μ›ƒ |

### 5.2 κ³ κ°€μ©μ„± κµ¬μ„±

| μ»΄ν¬λ„νΈ        | κ°€μ©μ„± μ „λµ                   |
|-------------|--------------------------|
| ECS         | Multi-AZ Task λ°°ν¬         |
| RDS Aurora  | Multi-AZ + Auto Failover |
| ElastiCache | Multi-AZ (μ΄μ)            |
| ALB         | Cross-Zone λ΅λ“ λ°Έλ°μ‹±        |

### 5.3 μ¬ν•΄λ³µκµ¬ (DR) λ©ν‘

| μ§€ν‘  | λ©ν‘     | μ „λµ                       |
|-----|--------|--------------------------|
| RTO | 30λ¶„ μ΄λ‚΄ | Warm Standby (DR Region) |
| RPO | 5λ¶„ μ΄λ‚΄  | Cross-Region Replication |

---

## 6. λ³΄μ• μ„¤κ³„

### 6.1 λ„¤νΈμ›ν¬ λ³΄μ•

| μ»΄ν¬λ„νΈ        | Security Group κ·μΉ™              |
|-------------|--------------------------------|
| ALB         | Inbound: 443 from 0.0.0.0/0    |
| ECS         | Inbound: 8080 from ALB SG only |
| RDS         | Inbound: 5432 from ECS SG only |
| ElastiCache | Inbound: 6379 from ECS SG only |

### 6.2 λ°μ΄ν„° λ³΄μ•

| ν•­λ©      | μ μ©                       |
|---------|--------------------------|
| μ „μ†΅ μ•”νΈν™”  | TLS 1.2 μ΄μƒ               |
| μ €μ¥ μ•”νΈν™”  | RDS, ElastiCache μ•”νΈν™” ν™μ„±ν™” |
| λΉ„λ°€ κ΄€λ¦¬   | AWS Secrets Manager      |
| μ ‘κ·Ό μ μ–΄   | IAM Role (μµμ† κ¶ν• μ›μΉ™)      |

---

## 7. λ¨λ‹ν„°λ§ λ° μ•λ

### 7.1 CloudWatch λ©”νΈλ¦­

| μ„λΉ„μ¤         | μ£Όμ” λ©”νΈλ¦­                                     |
|-------------|--------------------------------------------|
| ECS         | CPUUtilization, MemoryUtilization          |
| RDS         | DatabaseConnections, ReadLatency           |
| ElastiCache | CacheHitRate, CurrConnections              |
| ALB         | RequestCount, TargetResponseTime, 5XXCount |

### 7.2 μ•λ μ„¤μ •

| μ•λ             | μ΅°κ±΄                   | μ„κ³„κ°’      |
|----------------|----------------------|----------|
| High CPU       | CPU > 80% (5λ¶„ μ§€μ†)    | Critical |
| High Memory    | Memory > 85% (5λ¶„ μ§€μ†) | Warning  |
| DB Connections | Connections > 80%    | Warning  |
| Error Rate     | 5XX > 5% (5λ¶„ μ§€μ†)     | Critical |

---

## 8. λ°°ν¬ μ „λµ

### 8.1 CI/CD νμ΄ν”„λΌμΈ

```
GitHub β†’ CodePipeline β†’ CodeBuild β†’ ECR β†’ ECS (Blue/Green)
```

### 8.2 λ°°ν¬ λ°©μ‹

| λ°©μ‹          | μ„¤λ…                  | μ‚¬μ© μ‹μ     |
|-------------|---------------------|----------|
| Blue/Green  | λ¬΄μ¤‘λ‹¨ λ°°ν¬, μ¦‰μ‹ λ΅¤λ°± κ°€λ¥    | μ΄μ ν™κ²½    |
| Rolling     | μ μ§„μ  μ—…λ°μ΄νΈ            | κ°λ°/μ¤ν…μ΄μ§•  |

---

## 9. μμƒ λΉ„μ© (μ›”κ°„)

| μ„λΉ„μ¤         | μμƒ λΉ„μ©           |
|-------------|-----------------|
| ECS Fargate | $50 ~ $200      |
| RDS Aurora  | $100 ~ $300     |
| ElastiCache | $15 ~ $50       |
| ALB         | $20 ~ $30       |
| κΈ°νƒ€          | $10 ~ $50       |
| **ν•©κ³„**      | **$195 ~ $630** |

> π’΅ λΉ„μ© μµμ ν™”: Reserved Instance (RDS), Savings Plans (Fargate) ν™μ© κ¶μ¥

---

## 10. λ‹¤μ λ‹¨κ³„

λ‹¤μ λ‹¨κ³„μ—μ„λ” ν…μ¤νΈ μ „λµμ„ μ„¤κ³„ν•μ—¬ ν’μ§ λ³΄μ¦ λ°©λ²•μ„ κµ¬μ²΄ν™”ν•  μμ •μ…λ‹λ‹¤.

---

**λ‹¤μ λ¬Έμ„**: [09. ν…μ¤νΈ μ „λµ](./09-ν…μ¤νΈ-μ „λµ.md)
